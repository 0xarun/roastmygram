{"_id":"@botwall/middleware","_rev":"5-94e0cc5403c08a7bb544ea60e57e225f","name":"@botwall/middleware","dist-tags":{"latest":"1.2.2"},"versions":{"1.0.0":{"name":"@botwall/middleware","version":"1.0.0","keywords":["botwall","middleware","express","pay-per-crawl","signature","protection"],"author":{"name":"BotWall Team"},"license":"MIT","_id":"@botwall/middleware@1.0.0","maintainers":[{"name":"0xarun","email":"arundhanush4771@gmail.com"}],"homepage":"https://github.com/botwall/middleware#readme","bugs":{"url":"https://github.com/botwall/middleware/issues"},"dist":{"shasum":"59a1d303b591a5e505200a1bdfb215a82784c8db","tarball":"https://registry.npmjs.org/@botwall/middleware/-/middleware-1.0.0.tgz","fileCount":8,"integrity":"sha512-a1utuN+rsoIQPGrvIxcUcuNlB1B/uk8dlJiowoa/yQtbo5V8XrYJEQyAhW++SaFOYZbM6k4nLwe6iyyjtVpD6A==","signatures":[{"sig":"MEUCIQCDgOXueBEqi9nn2XvpvFRFiuYr9ISkBoO+txXrBit5iAIgVkHEO4NqBoeisUmpLtYD1N4t+Itz+fS0UAo6Bg1hiDE=","keyid":"SHA256:DhQ8wR5APBvFHLF/+Tc+AYvPOdTpcIDqOhxsBHRwC7U"}],"unpackedSize":9168},"main":"dist/validateCrawlRequest.js","types":"dist/validateCrawlRequest.d.ts","gitHead":"bce7678e292ee8ff3b4627a0bb919263ea0ff80a","scripts":{"build":"tsc"},"_npmUser":{"name":"0xarun","email":"arundhanush4771@gmail.com"},"repository":{"url":"git+https://github.com/botwall/middleware.git","type":"git"},"_npmVersion":"11.2.0","description":"Express middleware for protecting your API routes with pay-per-crawl and signature verification.","directories":{},"_nodeVersion":"20.17.0","dependencies":{"pg":"^8.16.3","dotenv":"^17.2.0","sqlite3":"^5.1.7","ts-node":"^10.9.2","node-fetch":"^2.7.0","typescript":"^5.8.3","@types/node":"^24.0.14"},"_hasShrinkwrap":false,"devDependencies":{"@types/pg":"^8.15.4"},"_npmOperationalInternal":{"tmp":"tmp/middleware_1.0.0_1752791350793_0.8232202911426212","host":"s3://npm-registry-packages-npm-production"}},"1.1.1":{"name":"@botwall/middleware","version":"1.1.1","keywords":["botwall","middleware","express","pay-per-crawl","signature","protection"],"author":{"name":"BotWall Team"},"license":"MIT","_id":"@botwall/middleware@1.1.1","maintainers":[{"name":"0xarun","email":"arundhanush4771@gmail.com"}],"homepage":"https://github.com/0xarun/botwall-pay-per-crawl#readme","bugs":{"url":"https://github.com/0xarun/botwall-pay-per-crawl/issues"},"dist":{"shasum":"d7b2d707f9036e284e73af736138ebd439f22def","tarball":"https://registry.npmjs.org/@botwall/middleware/-/middleware-1.1.1.tgz","fileCount":6,"integrity":"sha512-QQ5CpXPF29brn08SeHV6Ivhhn4mEcRcTQK4cSX6Lpc4OpR862eqjDR4BPD6VyhETi2DXDACl0zPKP8BQPNVDpw==","signatures":[{"sig":"MEUCIQCblVoIlzht5fIDCxgsEMttLzjJj86FBI5M4nOE13/hCgIgSX8ItH2GMW++/pj/btVETeMg4mBt70wbFPYBpKLo1sI=","keyid":"SHA256:DhQ8wR5APBvFHLF/+Tc+AYvPOdTpcIDqOhxsBHRwC7U"}],"unpackedSize":8837},"main":"dist/validateCrawlRequest.js","types":"dist/validateCrawlRequest.d.ts","gitHead":"3f6b26229bbc16ede5949c95197db62f6169c267","scripts":{"build":"tsc"},"_npmUser":{"name":"0xarun","email":"arundhanush4771@gmail.com"},"repository":{"url":"git+https://github.com/0xarun/botwall-pay-per-crawl.git","type":"git"},"_npmVersion":"11.2.0","description":"Express middleware for protecting your API routes with pay-per-crawl and signature verification.","directories":{},"_nodeVersion":"20.17.0","dependencies":{"pg":"^8.16.3","dotenv":"^17.2.0","sqlite3":"^5.1.7","ts-node":"^10.9.2","node-fetch":"^2.7.0","typescript":"^5.8.3","@types/node":"^24.0.14"},"_hasShrinkwrap":false,"devDependencies":{"@types/pg":"^8.15.4"},"_npmOperationalInternal":{"tmp":"tmp/middleware_1.1.1_1752869566930_0.26153652999103993","host":"s3://npm-registry-packages-npm-production"}},"1.2.0":{"name":"@botwall/middleware","version":"1.2.0","keywords":["botwall","middleware","express","pay-per-crawl","signature","protection","analytics","bot-management","crawler-detection"],"author":{"name":"BotWall Team"},"license":"MIT","_id":"@botwall/middleware@1.2.0","maintainers":[{"name":"0xarun","email":"arundhanush4771@gmail.com"}],"homepage":"https://github.com/0xarun/botwall-pay-per-crawl#readme","bugs":{"url":"https://github.com/0xarun/botwall-pay-per-crawl/issues"},"dist":{"shasum":"c49128d3107005b57e85038d01edec9391c28f32","tarball":"https://registry.npmjs.org/@botwall/middleware/-/middleware-1.2.0.tgz","fileCount":6,"integrity":"sha512-ks71eUIsCFYa/CaGYz23yp1EfF4RGldg7pscLKR1mTkLuJ61iDqoy5NQAlkbuBEHEAgVr6IyB4SyYVsMeuyXLg==","signatures":[{"sig":"MEQCIBmNds8ojINwrLPFe/yVoJIcHhxX8BuIYN3HS+NI6R4oAiAHlCFKyXtz7j42qpah8L9bnlWeFZJ3CLWC3s/3urRnhQ==","keyid":"SHA256:DhQ8wR5APBvFHLF/+Tc+AYvPOdTpcIDqOhxsBHRwC7U"}],"unpackedSize":15522},"main":"dist/validateCrawlRequest.js","types":"dist/validateCrawlRequest.d.ts","gitHead":"2d3daef85ffbd3a33517c2f871fd96d1c8be79d8","scripts":{"build":"tsc"},"_npmUser":{"name":"0xarun","email":"arundhanush4771@gmail.com"},"repository":{"url":"git+https://github.com/0xarun/botwall-pay-per-crawl.git","type":"git"},"_npmVersion":"11.2.0","description":"Express middleware for protecting your API routes with pay-per-crawl, signature verification, bot analytics, and intelligent bot management.","directories":{},"_nodeVersion":"20.17.0","dependencies":{"pg":"^8.16.3","dotenv":"^17.2.0","sqlite3":"^5.1.7","ts-node":"^10.9.2","tweetnacl":"^1.0.3","node-fetch":"^2.7.0","typescript":"^5.8.3","@types/node":"^24.0.14"},"_hasShrinkwrap":false,"devDependencies":{"@types/pg":"^8.15.4"},"_npmOperationalInternal":{"tmp":"tmp/middleware_1.2.0_1753904381168_0.7219682813799833","host":"s3://npm-registry-packages-npm-production"}},"1.2.1":{"name":"@botwall/middleware","version":"1.2.1","keywords":["botwall","middleware","express","pay-per-crawl","signature","protection","analytics","bot-management","crawler-detection"],"author":{"name":"BotWall Team"},"license":"MIT","_id":"@botwall/middleware@1.2.1","maintainers":[{"name":"0xarun","email":"arundhanush4771@gmail.com"}],"homepage":"https://github.com/0xarun/botwall-pay-per-crawl#readme","bugs":{"url":"https://github.com/0xarun/botwall-pay-per-crawl/issues"},"dist":{"shasum":"6afcbd5a3ccdf7258c679c1fc1b31bf9f037cabc","tarball":"https://registry.npmjs.org/@botwall/middleware/-/middleware-1.2.1.tgz","fileCount":6,"integrity":"sha512-ZQif/ptfzhyN5NbrOkLtr2coFuD0gUM+Hk0h8+K//WVW1pm1KdIAev6ETN44bnWpYNDaDkI7A1oIWiBu+6fOiA==","signatures":[{"sig":"MEUCIFD6YY/yFoITMQvuGpTSSdtQkbvhPe+pQLNYBWX2JQCEAiEAotsZShbyyTwHPz8Qkk/OHfnH46oidSQ5qsH7NQ2JlsU=","keyid":"SHA256:DhQ8wR5APBvFHLF/+Tc+AYvPOdTpcIDqOhxsBHRwC7U"}],"unpackedSize":15919},"main":"dist/validateCrawlRequest.js","types":"dist/validateCrawlRequest.d.ts","gitHead":"2d3daef85ffbd3a33517c2f871fd96d1c8be79d8","scripts":{"build":"tsc"},"_npmUser":{"name":"0xarun","email":"arundhanush4771@gmail.com"},"repository":{"url":"git+https://github.com/0xarun/botwall-pay-per-crawl.git","type":"git"},"_npmVersion":"11.2.0","description":"Express middleware for protecting your API routes with pay-per-crawl, signature verification, bot analytics, and intelligent bot management.","directories":{},"_nodeVersion":"20.17.0","dependencies":{"pg":"^8.16.3","dotenv":"^17.2.0","sqlite3":"^5.1.7","ts-node":"^10.9.2","tweetnacl":"^1.0.3","node-fetch":"^2.7.0","typescript":"^5.8.3","@types/node":"^24.0.14"},"_hasShrinkwrap":false,"devDependencies":{"@types/pg":"^8.15.4"},"_npmOperationalInternal":{"tmp":"tmp/middleware_1.2.1_1753905755946_0.6823209130265391","host":"s3://npm-registry-packages-npm-production"}},"1.2.2":{"name":"@botwall/middleware","version":"1.2.2","description":"Express middleware for protecting your API routes with pay-per-crawl, signature verification, bot analytics, and intelligent bot management.","main":"dist/validateCrawlRequest.js","types":"dist/validateCrawlRequest.d.ts","scripts":{"build":"tsc"},"keywords":["botwall","middleware","express","pay-per-crawl","signature","protection","analytics","bot-management","crawler-detection"],"author":{"name":"BotWall Team"},"license":"MIT","dependencies":{"@types/node":"^24.0.14","dotenv":"^17.2.0","node-fetch":"^2.7.0","pg":"^8.16.3","sqlite3":"^5.1.7","ts-node":"^10.9.2","tweetnacl":"^1.0.3","typescript":"^5.8.3"},"devDependencies":{"@types/pg":"^8.15.4"},"repository":{"type":"git","url":"git+https://github.com/0xarun/botwall-pay-per-crawl.git"},"_id":"@botwall/middleware@1.2.2","gitHead":"771459d68df76e67d314bd36694b82a9a1eec146","bugs":{"url":"https://github.com/0xarun/botwall-pay-per-crawl/issues"},"homepage":"https://github.com/0xarun/botwall-pay-per-crawl#readme","_nodeVersion":"20.17.0","_npmVersion":"11.2.0","dist":{"integrity":"sha512-s9umgha1QjY9sO8IHpie8nNXfj5Ib1Ync7WQ/ItrVcbWHp0a7K03ruEbd1+BsMqWCCj20ct2fEikq0RKtTWtxA==","shasum":"a295aa3723e9cc62befdbe6b80fa4497f762a4a7","tarball":"https://registry.npmjs.org/@botwall/middleware/-/middleware-1.2.2.tgz","fileCount":6,"unpackedSize":16607,"signatures":[{"keyid":"SHA256:DhQ8wR5APBvFHLF/+Tc+AYvPOdTpcIDqOhxsBHRwC7U","sig":"MEQCIEf9zM0uH23EpLbdQFmEfi1xsF4kySvIr5eTAZYeOXQeAiAyOsYTuUYNC+TwfyeYJlRRwRMl/f8rPjaq7kZopGvSWw=="}]},"_npmUser":{"name":"0xarun","email":"arundhanush4771@gmail.com"},"directories":{},"maintainers":[{"name":"0xarun","email":"arundhanush4771@gmail.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages-npm-production","tmp":"tmp/middleware_1.2.2_1753908259335_0.4640936952039505"},"_hasShrinkwrap":false}},"time":{"created":"2025-07-17T22:29:10.682Z","modified":"2025-07-30T20:44:19.717Z","1.0.0":"2025-07-17T22:29:10.989Z","1.1.1":"2025-07-18T20:12:47.124Z","1.2.0":"2025-07-30T19:39:41.394Z","1.2.1":"2025-07-30T20:02:36.156Z","1.2.2":"2025-07-30T20:44:19.513Z"},"bugs":{"url":"https://github.com/0xarun/botwall-pay-per-crawl/issues"},"author":{"name":"BotWall Team"},"license":"MIT","homepage":"https://github.com/0xarun/botwall-pay-per-crawl#readme","keywords":["botwall","middleware","express","pay-per-crawl","signature","protection","analytics","bot-management","crawler-detection"],"repository":{"type":"git","url":"git+https://github.com/0xarun/botwall-pay-per-crawl.git"},"description":"Express middleware for protecting your API routes with pay-per-crawl, signature verification, bot analytics, and intelligent bot management.","maintainers":[{"name":"0xarun","email":"arundhanush4771@gmail.com"}],"readme":"# BotWall Middleware\r\n\r\nExpress middleware for protecting your API routes with pay-per-crawl, signature verification, bot analytics, and intelligent bot management.\r\n\r\n## Installation\r\n```bash\r\nnpm install @botwall/middleware\r\n```\r\n\r\n## Usage\r\n```js\r\nconst { validateCrawlRequest } = require('@botwall/middleware');\r\n\r\napp.use('/article', validateCrawlRequest());\r\n```\r\n\r\n- No credentials or secrets needed. The middleware:\r\n  - Detects bots via headers/signatures and user-agent patterns\r\n  - Enforces pricing per path (via backend API)\r\n  - Verifies Ed25519 signatures for signed bots\r\n  - Provides comprehensive bot analytics and logging\r\n  - Supports site-specific bot allow/block preferences\r\n  - Handles known bots (search engines, LLMs) and unknown bots\r\n  - Calls the backend to deduct credits and log crawls\r\n\r\n## Configuration\r\n- `backendUrl` (optional): The base URL of your backend API. If not provided, the middleware will use `process.env.BACKEND_URL` or a default value.\r\n- No database or .env setup is required for the middleware package itself.\r\n\r\n## Features\r\n\r\n### Bot Detection & Management\r\n- **Signed Bots**: Verifies Ed25519 signatures for authenticated crawlers\r\n- **Known Bots**: Detects search engines, LLMs, and other known bots via user-agent patterns\r\n- **Unknown Bots**: Handles unidentified bots with analytics tracking\r\n- **Site-Specific Rules**: Supports per-site bot allow/block preferences\r\n\r\n### Analytics & Logging\r\n- Comprehensive bot crawl logging with IP addresses, user agents, and request details\r\n- Real-time analytics for bot traffic patterns\r\n- Performance-optimized caching for bot lists and site preferences\r\n\r\n## API\r\n- `validateCrawlRequest(options)` — Express middleware for comprehensive bot protection\r\n  - `options.backendUrl` (optional): Backend API base URL for pricing, public key lookups, and analytics.\r\n\r\n---\r\n\r\n## 👤 Maintainer\r\n- Arun — [x.com/0xarun](https://x.com/0xarun) | [linkedin.com/in/0xarun](https://linkedin.com/in/0xarun) ","readmeFilename":"README.md"}